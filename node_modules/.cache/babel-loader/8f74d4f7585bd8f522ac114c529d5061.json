{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\m_obr\\\\OneDrive\\\\Documents\\\\GitHub\\\\TEST\\\\src\\\\auth\\\\SignIn.js\";\n\n/*\r\n *   Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n *  You may not use this file except in compliance with the License.\r\n *  A copy of the License is located at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  or in the \"license\" file accompanying this file. This file is distributed\r\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\r\n *  express or implied. See the License for the specific language governing\r\n *  permissions and limitations under the License.\r\n */\nimport React from 'react';\nimport { Auth } from 'aws-amplify';\nimport DynamicImage from '../components/DynamicImage';\nimport { withRouter } from 'react-router-dom';\nimport SiteNav from '../components/SiteNav';\nimport '../css/app.css';\n/**\r\n * Sign-in Page\r\n */\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      stage: 0,\n      email: '',\n      password: '',\n      code: '',\n      userObject: null\n    };\n  }\n\n  async onSubmitForm(e) {\n    e.preventDefault();\n\n    try {\n      const userObject = await Auth.signIn(this.state.email.replace(/[@.]/g, '|'), this.state.password);\n      console.log('userObject', userObject);\n\n      if (userObject.challengeName) {\n        // Auth challenges are pending prior to token issuance\n        this.setState({\n          userObject,\n          stage: 1\n        });\n      } else {\n        // No remaining auth challenges need to be satisfied\n        const session = await Auth.currentSession(); // console.log('Cognito User Access Token:', session.getAccessToken().getJwtToken());\n\n        console.log('Cognito User Identity Token:', session.getIdToken().getJwtToken()); // console.log('Cognito User Refresh Token', session.getRefreshToken().getToken());\n\n        this.setState({\n          stage: 0,\n          email: '',\n          password: '',\n          code: ''\n        });\n        this.props.history.replace('/app');\n      }\n    } catch (err) {\n      alert(err.message);\n      console.error('Auth.signIn(): ', err);\n    }\n  }\n\n  async onSubmitVerification(e) {\n    e.preventDefault();\n\n    try {\n      const data = await Auth.confirmSignIn(this.state.userObject, this.state.code);\n      console.log('Cognito User Data:', data);\n      const session = await Auth.currentSession(); // console.log('Cognito User Access Token:', session.getAccessToken().getJwtToken());\n\n      console.log('Cognito User Identity Token:', session.getIdToken().getJwtToken()); // console.log('Cognito User Refresh Token', session.getRefreshToken().getToken());\n\n      this.setState({\n        stage: 0,\n        email: '',\n        password: '',\n        code: ''\n      });\n      this.props.history.replace('/app');\n    } catch (err) {\n      alert(err.message);\n      console.error('Auth.confirmSignIn(): ', err);\n    }\n  }\n\n  onEmailChanged(e) {\n    this.setState({\n      email: e.target.value.toLowerCase()\n    });\n  }\n\n  onPasswordChanged(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  onCodeChanged(e) {\n    this.setState({\n      code: e.target.value\n    });\n  }\n\n  isValidEmail(email) {\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  renderSignIn() {\n    const isValidEmail = this.isValidEmail(this.state.email);\n    const isValidPassword = this.state.password.length > 1;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DynamicImage, {\n      src: \"logo.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"form-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, \"Sign in\"), /*#__PURE__*/React.createElement(SiteNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"registrationForm\",\n      onSubmit: e => this.onSubmitForm(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: isValidEmail ? 'valid' : 'invalid',\n      type: \"email\",\n      placeholder: \"Email\",\n      value: this.state.email,\n      onChange: e => this.onEmailChanged(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: isValidPassword ? 'valid' : 'invalid',\n      type: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password,\n      onChange: e => this.onPasswordChanged(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: !(isValidEmail && isValidPassword),\n      type: \"submit\",\n      value: \"Let's Ryde\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n  renderConfirm() {\n    const isValidEmail = this.isValidEmail(this.state.email);\n    const isValidCode = this.state.code.length === 6;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DynamicImage, {\n      src: \"logo.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"form-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, \"Enter MFA Code\"), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"verifyForm\",\n      onSubmit: e => this.onSubmitVerification(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: isValidEmail ? 'valid' : 'invalid',\n      type: \"email\",\n      placeholder: \"Email\",\n      value: this.state.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: isValidCode ? 'valid' : 'invalid',\n      type: \"text\",\n      placeholder: \"Verification Code\",\n      value: this.state.code,\n      onChange: e => this.onCodeChanged(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: !(isValidCode && isValidEmail),\n      type: \"submit\",\n      value: \"Verify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n  render() {\n    switch (this.state.stage) {\n      case 0:\n      default:\n        return this.renderSignIn();\n\n      case 1:\n        return this.renderConfirm();\n    }\n  }\n\n}\n\nexport default withRouter(SignIn);","map":{"version":3,"sources":["C:/Users/m_obr/OneDrive/Documents/GitHub/TEST/src/auth/SignIn.js"],"names":["React","Auth","DynamicImage","withRouter","SiteNav","SignIn","Component","constructor","props","state","stage","email","password","code","userObject","onSubmitForm","e","preventDefault","signIn","replace","console","log","challengeName","setState","session","currentSession","getIdToken","getJwtToken","history","err","alert","message","error","onSubmitVerification","data","confirmSignIn","onEmailChanged","target","value","toLowerCase","onPasswordChanged","onCodeChanged","isValidEmail","re","test","String","renderSignIn","isValidPassword","length","renderConfirm","isValidCode","render"],"mappings":"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","sourcesContent":["/*\r\n *   Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n\r\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\r\n *  You may not use this file except in compliance with the License.\r\n *  A copy of the License is located at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  or in the \"license\" file accompanying this file. This file is distributed\r\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\r\n *  express or implied. See the License for the specific language governing\r\n *  permissions and limitations under the License.\r\n */\r\nimport React from 'react';\r\nimport { Auth } from 'aws-amplify';\r\nimport DynamicImage from '../components/DynamicImage';\r\nimport { withRouter } from 'react-router-dom';\r\nimport SiteNav from '../components/SiteNav';\r\n\r\nimport '../css/app.css';\r\n\r\n/**\r\n * Sign-in Page\r\n */\r\nclass SignIn extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stage: 0,\r\n      email: '',\r\n      password: '',\r\n      code: '',\r\n      userObject: null\r\n    };\r\n  }\r\n\r\n  async onSubmitForm(e) {\r\n    e.preventDefault();\r\n    try {\r\n        const userObject = await Auth.signIn(\r\n            this.state.email.replace(/[@.]/g, '|'),\r\n            this.state.password\r\n        );\r\n        console.log('userObject', userObject);\r\n        if (userObject.challengeName) {\r\n            // Auth challenges are pending prior to token issuance\r\n            this.setState({ userObject, stage: 1 });\r\n        } else {\r\n            // No remaining auth challenges need to be satisfied\r\n            const session = await Auth.currentSession();\r\n            // console.log('Cognito User Access Token:', session.getAccessToken().getJwtToken());\r\n            console.log('Cognito User Identity Token:', session.getIdToken().getJwtToken());\r\n            // console.log('Cognito User Refresh Token', session.getRefreshToken().getToken());\r\n            this.setState({ stage: 0, email: '', password: '', code: '' });\r\n            this.props.history.replace('/app');\r\n        }\r\n    } catch (err) {\r\n        alert(err.message);\r\n        console.error('Auth.signIn(): ', err);\r\n    }\r\n}\r\n\r\nasync onSubmitVerification(e) {\r\n  e.preventDefault();\r\n  try {\r\n      const data = await Auth.confirmSignIn(\r\n      this.state.userObject,\r\n      this.state.code\r\n      );\r\n      console.log('Cognito User Data:', data);\r\n      const session = await Auth.currentSession();\r\n      // console.log('Cognito User Access Token:', session.getAccessToken().getJwtToken());\r\n      console.log('Cognito User Identity Token:', session.getIdToken().getJwtToken());\r\n      // console.log('Cognito User Refresh Token', session.getRefreshToken().getToken());\r\n      this.setState({ stage: 0, email: '', password: '', code: '' });\r\n      this.props.history.replace('/app');\r\n  } catch (err) {\r\n      alert(err.message);\r\n      console.error('Auth.confirmSignIn(): ', err);\r\n  }\r\n}\r\n\r\n  onEmailChanged(e) {\r\n    this.setState({ email: e.target.value.toLowerCase() });\r\n  }\r\n\r\n  onPasswordChanged(e) {\r\n    this.setState({ password: e.target.value });\r\n  }\r\n\r\n  onCodeChanged(e) {\r\n    this.setState({ code: e.target.value });\r\n  }\r\n\r\n  isValidEmail(email) {\r\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n  }\r\n\r\n  renderSignIn() {\r\n    const isValidEmail = this.isValidEmail(this.state.email);\r\n    const isValidPassword = this.state.password.length > 1;\r\n\r\n    return (\r\n      <div className=\"app\">\r\n        <header>\r\n          <DynamicImage src=\"logo.png\"/>\r\n        </header>\r\n        <section className=\"form-wrap\">\r\n          <h1>Sign in</h1>\r\n          <SiteNav/>\r\n          <form id=\"registrationForm\" onSubmit={(e) => this.onSubmitForm(e)}>\r\n            <input className={isValidEmail?'valid':'invalid'} type=\"email\" placeholder=\"Email\" value={this.state.email} onChange={(e) => this.onEmailChanged(e)}/>\r\n            <input className={isValidPassword?'valid':'invalid'} type=\"password\" placeholder=\"Password\" value={this.state.password} onChange={(e) => this.onPasswordChanged(e)}/>\r\n            <input disabled={!(isValidEmail && isValidPassword)} type=\"submit\" value=\"Let's Ryde\"/>\r\n          </form>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderConfirm() {\r\n    const isValidEmail = this.isValidEmail(this.state.email);\r\n    const isValidCode = this.state.code.length === 6;\r\n\r\n    return (\r\n      <div className=\"app\">\r\n        <header>\r\n          <DynamicImage src=\"logo.png\"/>\r\n        </header>\r\n        <section className=\"form-wrap\">\r\n          <h1>Enter MFA Code</h1>\r\n          <form id=\"verifyForm\" onSubmit={(e) => this.onSubmitVerification(e)}>\r\n            <input className={isValidEmail?'valid':'invalid'} type=\"email\" placeholder=\"Email\" value={this.state.email}/>\r\n            <input className={isValidCode?'valid':'invalid'} type=\"text\" placeholder=\"Verification Code\" value={this.state.code} onChange={(e) => this.onCodeChanged(e)}/>\r\n            <input disabled={!(isValidCode&&isValidEmail)} type=\"submit\" value=\"Verify\"/>\r\n          </form>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    switch (this.state.stage) {\r\n      case 0:\r\n      default:\r\n        return this.renderSignIn();\r\n      case 1:\r\n        return this.renderConfirm();\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(SignIn);\r\n\r\n"]},"metadata":{},"sourceType":"module"}